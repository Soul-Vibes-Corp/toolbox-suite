<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Profile | Toolbox Suite</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    margin: 0;
    background: #f6f8fa;
    color: #1c1c1c;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background-image:
      linear-gradient(45deg, #e5e9ef 25%, transparent 25%),
      linear-gradient(-45deg, #e5e9ef 25%, transparent 25%),
      linear-gradient(45deg, transparent 75%, #e5e9ef 75%),
      linear-gradient(-45deg, transparent 75%, #e5e9ef 75%);
    background-size: 60px 60px;
    background-position: 0 0, 0 30px, 30px -30px, -30px 0;
  }
    .profile-container {
      max-width: 600px;
      margin: 0 auto;
      background: #e9edf1;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.1);
    }
    h2 {
      color: #0ff;
      text-align: center;
    }
    input {
      width: 100%;
      padding: 0.75rem;
      margin: 0.5rem 0 1rem;
      border-radius: 6px;
      background: #222;
      color: #0ff;
      border: none;
    }
    button {
      width: 100%;
      padding: 0.75rem;
      margin-top: 0.5rem;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
    .danger {
      background: #d9534f;
    }
    .danger:hover {
      background: #c9302c;
    }
     .link {
      text-align: center;
      margin-top: 1rem;
    }
    .link a {
      color: #0ff;
      text-decoration: none;
      display: inline-block;
      margin: 0.5rem;
    }
    .link a:hover {
      color: #0fa;
    }

    .back-button {
  position: absolute;
  top: 24px;
  left: 24px;
  background: transparent;
  color: #0ff;
  font-weight: 600;
  text-decoration: none;
  font-size: 1rem;
  transition: color 0.3s ease;
  border: none;
}

.back-button:hover {
  color: #0fa;
}

    
    .message {
      text-align: center;
      margin-top: 1rem;
    }



  .bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 60px;
    background-color: #dde6f0;
    display: flex;
    justify-content: space-around;
    align-items: center;
    border-top: 1px solid #bbb;
    z-index: 1000;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.08);
  }

  .bottom-nav .nav-link {
    color: #2a2a2a;
    font-size: 1.5rem;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .bottom-nav .nav-link:hover,
  .bottom-nav .nav-link:focus {
    color: #0078d4;
  }

.clip-hexagon {
    clip-path: polygon(25% 5%, 75% 5%, 100% 50%, 75% 95%, 25% 95%, 0% 50%);
  }

  .visually-hidden {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }

  .futuristic-panel {
    margin-top: 3rem;
    padding: 2rem;
    border-radius: 16px;
    background: radial-gradient(circle at top left, rgba(100, 200, 255, 0.2), #ffffff);
    box-shadow: 0 0 30px #a3e6ff;
    color: #005fa3;
  }

  .extra-sections {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    margin-top: 2rem;
    justify-content: space-between;
  }

     main {
    padding: 2rem 1rem 100px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
    
  </style>
</head>

<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 24px;
    background-color: #e3eaf3;
    border-bottom: 1px solid #dcdfe3;
    position: relative;
    z-index: 10;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);
  }

  .home-link {
    color: #0078d4;
    text-decoration: none;
    font-size: 1.8rem;
  }

  .home-link:hover {
    color: #005fa3;
  }

  .hamburger {
    font-size: 30px;
    color: #0078d4;
    cursor: pointer;
    display: none;
    user-select: none;
  }

  .header-left {
    display: flex;
    align-items: center;
    gap: 20px;
  }

  .points-counter {
    background-color: #e8f4ff;
    color: #005fa3;
    padding: 6px 12px;
    border-radius: 6px;
    font-weight: bold;
    font-size: 1rem;
    box-shadow: 0 0 10px rgba(94, 201, 240, 0.2);
  }

  .hamburger:hover {
    color: #005fa3;
  }

  .menu-toggle {
    display: none;
  }

  .menu {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .actions {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .actions a,
  .actions button,
  .actions input[type="text"] {
    padding: 8px 14px;
    border-radius: 6px;
    border: 1px solid #dcdfe3;
    background: #f9fbfc;
    color: #0078d4;
    text-decoration: none;
    font-size: 1rem;
    transition: all 0.3s ease;
  }

  .actions a:hover,
  .actions button:hover,
  .actions input[type="text"]:focus {
    background-color: #e0f2ff;
    color: #005fa3;
    outline: none;
  }

  .actions input[type="text"] {
    min-width: 150px;
    color: #1c1c1c;
  }

  .visually-hidden {
    position: absolute !important;
    height: 1px;
    width: 1px;
    overflow: hidden;
    clip: rect(1px, 1px, 1px, 1px);
    white-space: nowrap;
  }

  @media (max-width: 768px) {
    .hamburger {
      display: block;
    }

    .menu {
      position: absolute;
      top: 100%;
      right: 24px;
      flex-direction: column;
      background: #e8f4ff;
      padding: 16px;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0, 120, 212, 0.1);
      width: 250px;
      opacity: 0;
      pointer-events: none;
      transform: translateY(-10px);
      transition: all 0.3s ease;
    }

    .actions {
      flex-direction: column;
      gap: 12px;
      width: 100%;
    }

    .actions input[type="text"] {
      width: 100%;
    }

    .menu-toggle:checked + .hamburger + .menu {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }
  }

  .profile-circle {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid #5ec9f0; /* story-like border */
  display: flex;
  align-items: center;
  justify-content: center;
  background: #e3eaf3;
  transition: border 0.3s ease;
}

.profile-circle img {
 width: 24px;
  height: 24px;
  object-fit: contain;
  filter: brightness(0) saturate(100%) invert(26%) sepia(57%) saturate(548%) hue-rotate(176deg) brightness(94%) contrast(91%);
  transition: filter 0.2s ease;
  object-fit: cover;
  display: block;
}

  .nav-icon {
  width: 24px;
  height: 24px;
  object-fit: contain;
  filter: brightness(0) saturate(100%) invert(26%) sepia(57%) saturate(548%) hue-rotate(176deg) brightness(94%) contrast(91%);
  transition: filter 0.2s ease;
}

.nav-link:hover .nav-icon {
  filter: brightness(0) saturate(100%) invert(39%) sepia(84%) saturate(439%) hue-rotate(180deg) brightness(95%) contrast(104%);
}

</style>
  
<body>

<main>
  
  <a href="#" class="back-button" onclick="history.back(); return false;">‚Üê Back</a>
  <div class="register-container">
    
<div class="profile-container">
  <h2>üë§ My Profile</h2>

  <input type="text" id="username" placeholder="New Username" />
  <button id="update-username">Update Username</button>

  <input type="text" id="display-name" placeholder="New Display Name" />
  <button id="update-displayname">Update Display Name</button>

  <input type="password" id="new-password" placeholder="New Password" />
  <button id="change-password">Change Password</button>

  <button id="delete-account" class="danger">‚ùå Delete Account</button>

  <button id="logout" aria-label="Logout">üö™Logout</button>


  <p class="message" id="message"></p>

 <div class="link">
  <a href="../index.html">Back to Dashboard</a>
</div>
 <div class="link">
  <a href="index.html">üë§ Manage Settings</a>
</div>
 <div class="link">
  <a href="../profile-page/index.html">üë§View Profile</a>
</div>

</main>

  
<footer class="bottom-nav">
  <a href="../dashboard/index.html" class="nav-link" aria-label="Home">
    <img src="../dashboard/assets/home-icon.svg" alt="Home" class="nav-icon" />
  </a>
  <a href="../dashboard/explore-page/index.html" class="nav-link" aria-label="Search">
    <img src="../dashboard/assets/search-icon.svg" alt="Search" class="nav-icon" />
  </a>
  <a href="#add" class="nav-link" aria-label="Add">
    <img src="../dashboard/assets/add-icon.svg" alt="Add" class="nav-icon" />
  </a>
  <a href="../tools/forum/index.html" class="nav-link" aria-label="Messages">
    <img src="../dashboard/assets/message-icon.svg" alt="Messages" class="nav-icon" />
  </a>
  <a href="../dashboard/profile-page/index.html" class="nav-link profile-link" aria-label="Profile">
    <div class="profile-circle">
      <img id="profile-img" src="../dashboard/assets/default-user-icon.svg" alt="Profile" />
    </div>
  </a>
</footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-app.js";
  import {
    getAuth,
    updateProfile,
    updatePassword,
    deleteUser,
    signOut,
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-auth.js";
  import {
    getFirestore,
    doc,
    updateDoc,
    getDoc
  } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyA0tfVT75kWle3uwz1HouHRQdEWyzW1YNU",
    authDomain: "chat-code-forum.firebaseapp.com",
    projectId: "chat-code-forum",
    storageBucket: "chat-code-forum.appspot.com",
    messagingSenderId: "496765673859",
    appId: "1:496765673859:web:6c2e6695be447d6e32d6b6",
    measurementId: "G-XJKWXHF8WN"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const msg = document.getElementById("message");

  onAuthStateChanged(auth, async (user) => {
    if (!user) {
      window.location.href = "index.html";
    } else {
      const docSnap = await getDoc(doc(db, "users", user.uid));
      if (docSnap.exists()) {
        document.getElementById("username").placeholder = "Current: " + docSnap.data().username;
      }
      document.getElementById("display-name").placeholder = "Current: " + (user.displayName || "Not Set");
    }
  });

  document.getElementById("update-username").addEventListener("click", async () => {
    const username = document.getElementById("username").value.trim();
    if (!username) return;

    try {
      const user = auth.currentUser;
      await updateDoc(doc(db, "users", user.uid), { username });
      msg.textContent = "‚úÖ Username updated!";
    } catch (err) {
      msg.textContent = "‚ùå " + err.message;
    }
  });

  document.getElementById("update-displayname").addEventListener("click", async () => {
    const displayName = document.getElementById("display-name").value.trim();
    if (!displayName) return;

    try {
      await updateProfile(auth.currentUser, { displayName });
      msg.textContent = "‚úÖ Display name updated!";
    } catch (err) {
      msg.textContent = "‚ùå " + err.message;
    }
  });

  document.getElementById("change-password").addEventListener("click", async () => {
    const newPass = document.getElementById("new-password").value;
    if (!newPass) return;

    try {
      await updatePassword(auth.currentUser, newPass);
      msg.textContent = "‚úÖ Password changed!";
    } catch (err) {
      msg.textContent = "‚ùå " + err.message;
    }
  });

  document.getElementById("delete-account").addEventListener("click", async () => {
    if (!confirm("Are you sure you want to delete your account? This cannot be undone.")) return;

    try {
      await deleteUser(auth.currentUser);
      msg.textContent = "Account deleted.";
      setTimeout(() => window.location.href = "register.html", 2000);
    } catch (err) {
      msg.textContent = "‚ùå " + err.message;
    }
  });

  document.getElementById("logout").addEventListener("click", () => {
    signOut(auth).then(() => {
      window.location.href = "index.html";
    });
  });

function saveUserSettings(settingsObject) {
  const user = firebase.auth().currentUser;
  if (!user) return;

  firebase.firestore().collection("userSettings").doc(user.uid).set(settingsObject);
}

// Example:
saveUserSettings({
  theme: "dark",
  compressorSettings: {
    threshold: -12,
    ratio: 4,
  },
  reverbPreset: "Valhalla Space",
});

firebase.firestore().collection("userSettings").doc(user.uid).get().then(doc => {
  if (doc.exists) {
    const settings = doc.data();
    // Apply settings to app UI
  }
});

  
</script>

</body>
</html>
