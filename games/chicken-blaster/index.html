<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Galaxy Chicken Invaders</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        :root {
            --glow-color: #00f6ff;
            --secondary-glow: #ff00c1;
            --dark-bg: #0d0725;
            --light-text: #f0f8ff;
        }

        body {
            font-family: 'Orbitron', sans-serif;
            background-color: var(--dark-bg);
            color: var(--light-text);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            text-shadow: 0 0 2px rgba(255,255,255,0.3);
        }

        .game-wrapper {
            background: linear-gradient(145deg, #1b123d, #110c2c);
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7), inset 0 0 15px rgba(0, 246, 255, 0.1);
            border: 2px solid rgba(0, 246, 255, 0.2);
        }
        
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }
        
        canvas {
            background-color: #000;
            display: block;
            border-radius: 1rem;
            box-shadow: 0 0 20px var(--glow-color), inset 0 0 10px rgba(0,0,0,0.5);
            border: 1px solid var(--glow-color);
            cursor: none;
            position: relative;
            z-index: 1;
        }
        
        .ui-panel {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 800px;
            font-size: 1.25rem;
            font-weight: 700;
        }

        .stat-box {
            background-color: rgba(0, 0, 0, 0.3);
            color: var(--light-text);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border: 1px solid rgba(0, 246, 255, 0.4);
            text-shadow: 0 0 8px var(--glow-color);
            box-shadow: 0 0 10px rgba(0, 246, 255, 0.2);
        }
        
        .touch-controls {
            display: none;
            width: 100%;
            max-width: 800px;
            justify-content: space-between;
            margin-top: 1rem;
            z-index: 10;
        }
        
        .control-button {
            background: linear-gradient(145deg, rgba(13, 7, 37, 0.8), rgba(27, 18, 61, 0.8));
            border: 2px solid var(--glow-color);
            color: var(--light-text);
            padding: 1rem 1.5rem;
            border-radius: 50px;
            font-size: 1.25rem;
            font-weight: 700;
            user-select: none;
            -webkit-user-select: none;
            cursor: pointer;
            transition: all 0.2s ease-out;
            text-shadow: 0 0 10px var(--glow-color);
            box-shadow: 0 0 15px var(--glow-color), inset 0 0 5px rgba(0, 246, 255, 0.5);
        }
        
        .control-button:active {
            background: linear-gradient(145deg, var(--glow-color), var(--secondary-glow));
            transform: scale(0.95);
            box-shadow: 0 0 25px var(--glow-color);
        }
        
        .modal {
            display: flex;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: linear-gradient(145deg, #1b123d, #110c2c);
            padding: 2.5rem;
            border: 2px solid var(--glow-color);
            border-radius: 1rem;
            text-align: center;
            box-shadow: 0 0 40px var(--glow-color);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .modal-title {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 1rem;
            color: var(--light-text);
            text-shadow: 0 0 15px var(--glow-color), 0 0 25px var(--secondary-glow);
        }
        
        .modal-text {
            font-size: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .action-button {
            background: linear-gradient(45deg, var(--secondary-glow), var(--glow-color));
            color: white;
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 50px;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px var(--glow-color);
            text-shadow: 0 0 5px rgba(0,0,0,0.5);
        }
        
        .action-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px var(--glow-color), 0 0 15px var(--secondary-glow);
        }
    </style>
</head>
<body>

<div class="game-wrapper">
    <div class="game-container">
        <div class="ui-panel">
            <div class="stat-box">SCORE: <span id="score">0</span></div>
            <div class="stat-box">LIVES: <span id="lives">3</span></div>
        </div>
        <canvas id="gameCanvas"></canvas>
        <div class="touch-controls" id="touchControls">
            <div class="flex gap-4">
                <button class="control-button" id="leftBtn">&lt;</button>
                <button class="control-button" id="rightBtn">&gt;</button>
            </div>
            <button class="control-button" id="shootBtn">FIRE</button>
        </div>
    </div>
</div>

<div id="startModal" class="modal">
    <div class="modal-content">
        <h2 class="modal-title">GALAXY CHICKEN INVADERS</h2>
        <p class="modal-text">The galaxy needs you!</p>
        <button id="startBtn" class="action-button">START GAME</button>
    </div>
</div>

<div id="gameOverModal" class="modal" style="display: none;">
    <div class="modal-content">
        <h2 class="modal-title">GAME OVER</h2>
        <p class="modal-text">Final Score: <span id="finalScore">0</span></p>
        <button id="restartBtn" class="action-button">PLAY AGAIN</button>
    </div>
</div>


<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const livesEl = document.getElementById('lives');
    
    const startModal = document.getElementById('startModal');
    const gameOverModal = document.getElementById('gameOverModal');
    const finalScoreEl = document.getElementById('finalScore');
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    
    // --- Game Configuration ---
    let score = 0;
    let lives = 3;
    let gameRunning = false; // Start paused

    canvas.width = Math.min(800, window.innerWidth - 80);
    canvas.height = 600;

    // --- Starfield Background ---
    const stars = [];
    for (let i = 0; i < 200; i++) {
        stars.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            radius: Math.random() * 1.5 + 0.5,
            alpha: Math.random(),
            speed: Math.random() * 0.5 + 0.1
        });
    }

    function drawStarfield() {
        ctx.fillStyle = 'black';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        stars.forEach(star => {
            star.y += star.speed;
            if (star.y > canvas.height) {
                star.y = 0;
                star.x = Math.random() * canvas.width;
            }
            ctx.beginPath();
            ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(255, 255, 255, ${star.alpha})`;
            ctx.fill();
        });
    }

    // --- Player Spaceship ---
    const player = {
        x: canvas.width / 2,
        y: canvas.height - 70,
        width: 50,
        height: 55,
        speed: 8,
        dx: 0
    };
    
    function drawPlayer() {
        const x = player.x;
        const y = player.y;
        const w = player.width;
        const h = player.height;

        // Thruster flame
        ctx.fillStyle = `rgba(0, 246, 255, ${Math.random() * 0.5 + 0.5})`;
        ctx.shadowColor = 'cyan';
        ctx.shadowBlur = 20;
        const flameHeight = Math.random() * 30 + 20;
        ctx.beginPath();
        ctx.moveTo(x - w / 4, y + h);
        ctx.lineTo(x + w / 4, y + h);
        ctx.lineTo(x, y + h + flameHeight);
        ctx.closePath();
        ctx.fill();
        ctx.shadowBlur = 0;

        // Main Body
        ctx.fillStyle = '#e5e7eb';
        ctx.beginPath();
        ctx.moveTo(x, y); // Nose
        ctx.lineTo(x - w / 2, y + h);
        ctx.lineTo(x + w / 2, y + h);
        ctx.closePath();
        ctx.fill();
        
        // Darker overlay
        ctx.fillStyle = '#9ca3af';
        ctx.beginPath();
        ctx.moveTo(x, y + h*0.2); 
        ctx.lineTo(x - w / 3, y + h);
        ctx.lineTo(x + w / 3, y + h);
        ctx.closePath();
        ctx.fill();

        // Cockpit
        ctx.fillStyle = '#ff00c1'; // Magenta glow
        ctx.beginPath();
        ctx.arc(x, y + h * 0.5, w * 0.15, 0, Math.PI * 2);
        ctx.fill();
        ctx.shadowColor = '#ff00c1';
        ctx.shadowBlur = 15;
        ctx.fill();
        ctx.shadowBlur = 0;
    }

    // --- Projectiles ---
    const projectiles = [];
    const projectileSpeed = 12;
    const projectileWidth = 4;
    const projectileHeight = 20;

    function drawProjectiles() {
        projectiles.forEach(p => {
            ctx.fillStyle = '#00f6ff';
            ctx.shadowColor = '#00f6ff';
            ctx.shadowBlur = 15;
            ctx.fillRect(p.x - projectileWidth / 2, p.y, projectileWidth, projectileHeight);
            ctx.shadowBlur = 0;
        });
    }

    // --- Chickens ---
    const chickens = [];
    let chickenSpawnTimer = 100;

    function createChicken() {
        const size = Math.random() * 25 + 20;
        chickens.push({
            x: Math.random() * (canvas.width - size * 2) + size,
            y: -size,
            size,
            speed: Math.random() * 2.5 + 1.5,
            wobbleAngle: Math.random() * Math.PI * 2,
            wobbleSpeed: Math.random() * 0.05 + 0.02
        });
    }

    function drawChickens() {
        chickens.forEach(c => {
            ctx.save();
            ctx.translate(c.x, c.y);
            c.wobbleAngle += c.wobbleSpeed;
            ctx.rotate(Math.sin(c.wobbleAngle) * 0.15);
            ctx.shadowColor = 'white';
            ctx.shadowBlur = 10;
            // Body
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.ellipse(0, 0, c.size * 0.8, c.size, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.shadowBlur = 0;
            // Beak
            ctx.fillStyle = '#f97316';
            ctx.beginPath();
            ctx.moveTo(0, -c.size * 0.9);
            ctx.lineTo(c.size * 0.3, -c.size * 1.1);
            ctx.lineTo(0, -c.size * 1.3);
            ctx.fill();
            // Comb (Wattle)
            ctx.fillStyle = '#ef4444';
            ctx.beginPath();
            ctx.arc(0, -c.size * 1.3, c.size * 0.2, Math.PI, 0);
            ctx.fill();
            // Eye
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(-c.size * 0.2, -c.size * 1.1, c.size * 0.08, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
        });
    }

    // --- Particles (for explosions) ---
    const particles = [];
    function createExplosion(x, y, color) {
        for (let i = 0; i < 40; i++) {
            particles.push({
                x, y,
                radius: Math.random() * 3 + 1,
                color,
                velocity: { x: (Math.random() - 0.5) * 10, y: (Math.random() - 0.5) * 10 },
                alpha: 1,
                friction: 0.97
            });
        }
    }
    function drawParticles() {
        particles.forEach((p, index) => {
            p.velocity.x *= p.friction;
            p.velocity.y *= p.friction;
            p.x += p.velocity.x;
            p.y += p.velocity.y;
            p.alpha -= 0.02;
            if (p.alpha <= 0) particles.splice(index, 1);
            else {
                ctx.save();
                ctx.globalAlpha = p.alpha;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                ctx.fillStyle = p.color;
                ctx.shadowColor = p.color;
                ctx.shadowBlur = 10;
                ctx.fill();
                ctx.restore();
            }
        });
    }

    // --- Game Logic ---
    function update() {
        if (!gameRunning) return;
        requestAnimationFrame(update);
        
        drawStarfield();

        player.x += player.dx;
        if (player.x - player.width / 2 < 0) player.x = player.width / 2;
        if (player.x + player.width / 2 > canvas.width) player.x = canvas.width - player.width / 2;
        drawPlayer();
        
        projectiles.forEach((p, index) => {
            p.y -= projectileSpeed;
            if (p.y < 0) projectiles.splice(index, 1);
        });
        drawProjectiles();

        chickenSpawnTimer--;
        if (chickenSpawnTimer <= 0) {
            createChicken();
            chickenSpawnTimer = Math.max(25, Math.random() * 100 + 50 - (score / 500));
        }
        
        chickens.forEach((c, cIndex) => {
            c.y += c.speed;
            if (c.y - c.size > canvas.height) {
                chickens.splice(cIndex, 1);
                updateLives(-1); // Lose a life if a chicken gets past
            }
        });
        drawChickens();
        drawParticles();
        handleCollisions();
    }

    function handleCollisions() {
        projectiles.forEach((p, pIndex) => {
            chickens.forEach((c, cIndex) => {
                const dist = Math.hypot(p.x - c.x, p.y - c.y);
                if (dist - c.size - projectileHeight/2 < 1) {
                    createExplosion(c.x, c.y, '#f0f8ff');
                    setTimeout(() => {
                        chickens.splice(cIndex, 1);
                        projectiles.splice(pIndex, 1);
                    }, 0);
                    updateScore(100);
                }
            });
        });

        chickens.forEach((c, cIndex) => {
             const dist = Math.hypot(c.x - player.x, c.y - (player.y + player.height / 2));
             if (dist < c.size + player.width / 2) {
                createExplosion(player.x, player.y + player.height / 2, '#ff00c1');
                 setTimeout(() => chickens.splice(cIndex, 1), 0);
                updateLives(-1);
             }
        });
    }

    function updateScore(points) {
        score += points;
        scoreEl.textContent = score;
    }

    function updateLives(change) {
        if (!gameRunning) return;
        lives += change;
        livesEl.textContent = Math.max(0, lives);
        if (lives <= 0) {
            endGame();
        }
    }

    function startGame() {
        startModal.style.display = 'none';
        resetGame();
    }

    function endGame() {
        gameRunning = false;
        finalScoreEl.textContent = score;
        gameOverModal.style.display = 'flex';
    }

    function resetGame() {
        score = 0;
        lives = 3;
        chickens.length = 0;
        projectiles.length = 0;
        particles.length = 0;
        player.x = canvas.width / 2;
        scoreEl.textContent = score;
        livesEl.textContent = lives;
        gameOverModal.style.display = 'none';
        gameRunning = true;
        update();
    }

    // --- Controls ---
    const keys = { ArrowLeft: false, ArrowRight: false, Space: false };
    function handleMovement() {
        player.dx = 0;
        if (keys.ArrowLeft) player.dx = -player.speed;
        if (keys.ArrowRight) player.dx = player.speed;
    }
    let shootCooldown = false;
    function handleShooting() {
        if (gameRunning && keys.Space && !shootCooldown) {
            projectiles.push({ x: player.x, y: player.y });
            shootCooldown = true;
            setTimeout(() => shootCooldown = false, 150);
        }
    }
    window.addEventListener('keydown', (e) => {
        if (keys.hasOwnProperty(e.code)) keys[e.code] = true;
        handleMovement();
        handleShooting();
    });
    window.addEventListener('keyup', (e) => {
        if (keys.hasOwnProperty(e.code)) keys[e.code] = false;
        handleMovement();
    });

    startBtn.addEventListener('click', startGame);
    restartBtn.addEventListener('click', resetGame);

    function setupTouchControls() {
        if (!('ontouchstart' in window || navigator.maxTouchPoints > 0)) return;
        document.getElementById('touchControls').style.display = 'flex';
        const leftBtn = document.getElementById('leftBtn'), rightBtn = document.getElementById('rightBtn'), shootBtn = document.getElementById('shootBtn');
        const startMove = (key) => { keys[key] = true; handleMovement(); };
        const endMove = (key) => { keys[key] = false; handleMovement(); };
        leftBtn.addEventListener('touchstart', (e) => { e.preventDefault(); startMove('ArrowLeft'); }, { passive: false });
        leftBtn.addEventListener('touchend', (e) => { e.preventDefault(); endMove('ArrowLeft'); });
        rightBtn.addEventListener('touchstart', (e) => { e.preventDefault(); startMove('ArrowRight'); }, { passive: false });
        rightBtn.addEventListener('touchend', (e) => { e.preventDefault(); endMove('ArrowRight'); });
        shootBtn.addEventListener('touchstart', (e) => { e.preventDefault(); keys.Space = true; handleShooting(); }, { passive: false });
        shootBtn.addEventListener('touchend', (e) => { e.preventDefault(); keys.Space = false; });
    }

    window.addEventListener('resize', () => {
        canvas.width = Math.min(800, window.innerWidth - 80);
        player.x = canvas.width / 2;
    });
    
    // Initial draw for background
    drawStarfield();
    setupTouchControls();
</script>

</body>
</html>

